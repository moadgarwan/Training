<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Fitness & Diet Plan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            overflow-x: hidden;
            width: 100%;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 120px;
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .day-navigator {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .nav-arrow {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-arrow:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .current-day {
            font-size: 1.8em;
            font-weight: bold;
            color: #764ba2;
            text-align: center;
            flex: 1;
            cursor: pointer;
            position: relative;
        }
        
        .day-dropdown {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            display: none;
            z-index: 1001;
            min-width: 250px;
        }
        
        .day-dropdown.show {
            display: block;
        }
        
        .day-dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .day-dropdown-item:first-child {
            border-radius: 10px 10px 0 0;
        }
        
        .day-dropdown-item:last-child {
            border-bottom: none;
            border-radius: 0 0 10px 10px;
        }
        
        .day-dropdown-item:hover {
            background: #f8f9fa;
        }
        
        .day-dropdown-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .stats {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            margin-top: 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stat-item {
            text-align: center;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .stat-value.needed {
            color: #667eea;
        }
        
        .stat-value.consumed {
            color: #f5576c;
        }
        
        .stat-value.deficit {
            color: #28a745;
        }
        
        .stat-value.water {
            color: #4facfe;
        }
        
        .stat-label {
            font-size: 1em;
            color: #555;
            margin-top: 5px;
            font-weight: 600;
        }
        
        .exercise-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
            accent-color: #667eea;
        }
        
        .meal-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.1em;
            transition: background 0.3s;
            user-select: none;
        }
        
        .meal-header:hover {
            background: linear-gradient(135deg, #5569d1, #6439a0);
        }
        
        .meal-header .arrow {
            transition: transform 0.3s;
            font-size: 1.2em;
        }
        
        .meal-header.expanded .arrow {
            transform: rotate(180deg);
        }
        
        .meal-details {
            display: none;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
            margin-top: 2px;
        }
        
        .meal-details.show {
            display: block;
        }
        
        .ingredient-line,
        .nutrition-line {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .ingredient-line:last-of-type,
        .nutrition-line:last-of-type {
            border-bottom: none;
        }
        
        .nutrition-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #dee2e6;
        }
        
        .nutrition-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .day-content {
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        .day-content.active {
            display: block;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            body {
                padding-bottom: 100px;
                padding-left: 10px;
                padding-right: 10px;
            }
            .content-grid {
                grid-template-columns: 1fr;
            }
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                padding: 15px;
            }
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            .day-navigator {
                padding: 15px;
            }
            .current-day {
                font-size: 1.3em;
            }
            .nav-arrow {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
            .day-dropdown {
                left: 10px;
                right: 10px;
                transform: none;
                min-width: auto;
            }
            .card {
                padding: 15px;
            }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s;
            width: 100%;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #f0f0f0;
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            margin-right: 15px;
        }
        
        .workout-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .meal-icon {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }
        
        .card-title {
            font-size: 1.4em;
            color: #333;
            font-weight: bold;
        }
        
        .workout-list {
            list-style: none;
        }
        
        .workout-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: space-between;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .workout-list li:last-child {
            border-bottom: none;
        }
        
        .exercise-text {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .exercise-text:before {
            content: "‚úì";
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .exercise-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
            flex-shrink: 0;
        }
        
        .meal-card {
            margin-bottom: 15px;
        }
        
        .burn-badge {
            background: linear-gradient(135deg, #fa709a, #fee140);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 15px;
            display: inline-block;
        }
        
        .daily-summary {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .summary-title {
            color: #764ba2;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .summary-item {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .summary-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .summary-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="stats" id="calorieStats">
            <!-- Will be populated dynamically -->
        </div>
        
        <!-- Day content divs will be populated by JavaScript -->
        <div id="dayContent"></div>
    </div>
    
    <div class="day-navigator">
        <button class="nav-arrow" onclick="changeDay(-1)">‚Üê</button>
        <div class="current-day" id="currentDayTitle" onclick="toggleDayDropdown()">
            Sunday - Rest Day
            <div class="day-dropdown" id="dayDropdown">
                <div class="day-dropdown-item" data-day="sunday">Sunday - Rest Day</div>
                <div class="day-dropdown-item" data-day="monday">Monday - Chest Day</div>
                <div class="day-dropdown-item" data-day="tuesday">Tuesday - Cycling</div>
                <div class="day-dropdown-item" data-day="wednesday">Wednesday - Back Day</div>
                <div class="day-dropdown-item" data-day="thursday">Thursday - Running</div>
                <div class="day-dropdown-item" data-day="friday">Friday - Cycling</div>
                <div class="day-dropdown-item" data-day="saturday">Saturday - Legs Day</div>
            </div>
        </div>
        <button class="nav-arrow" onclick="changeDay(1)">‚Üí</button>
    </div>
    
    <script>
        // Workout data
        const workoutData = {
            sunday: {
                exercises: ["completeRestDay", "20 normalWalking", "focusRecovery", "mealPrep"],
                burnCalories: 110
            },
            monday: {
                exercises: [
                    "Incline Dumbbell Press",
                    "Dumbbell Bench Press",
                    "Seated Dumbbell Shoulder Press",
                    "Low Cable Fly",
                    "Dumbbell Lateral Raise",
                    "Close Grip Bench Press",
                    "Rope Pushdown",
                    "Rope Overhead Extension",
                    "Hanging Knee Raise",
                    "Decline Sit-ups",
                    "15 inclineWalking"
                ],
                burnCalories: 500
            },
            tuesday: {
                exercises: ["cyclingSession - 20km", "20 normalWalking"],
                burnCalories: 660
            },
            wednesday: {
                exercises: [
                    "Wide Grip Overhand Pulldown",
                    "Neutral Grip Pulldown",
                    "Dumbbell Row",
                    "Cable Row Natural Grip",
                    "Face Pull Rope",
                    "Bent Over Dumbbell Rear Delt Fly",
                    "Standing Dumbbell Shrugs",
                    "Incline Dumbbell Curl",
                    "Hammer Curl neutral grip",
                    "Reverse Curl EZ bar",
                    "15 inclineWalking"
                ],
                burnCalories: 500
            },
            thursday: {
                exercises: ["runningSession - 5km", "20 normalWalking"],
                burnCalories: 560
            },
            friday: {
                exercises: ["cyclingSession - 20km", "20 normalWalking"],
                burnCalories: 660
            },
            saturday: {
                exercises: [
                    "Front Squats",
                    "Romanian Deadlift",
                    "Walking Lunges",
                    "Seated Leg Curl",
                    "Leg Extension",
                    "Calf Raises",
                    "15 inclineWalking"
                ],
                burnCalories: 550
            }
        };

        // Updated meal data with exact nutritional values
        const mealData = {
            preMeal: {
                items: ["80g yogurt", "100g banana"],
                macros: { calories: 166.6, protein: 7.5, carbs: 30.3, fat: 2.7 }
            },
            sandwich1: {
                items: ["110g wholeWheatBread", "4 boiledEggs", "200g orange", "5g oliveOil"],
                macros: { calories: 667.4, protein: 37.6, carbs: 72.8, fat: 25.9 }
            },
            sandwich2: {
                items: ["110g wholeWheatBread", "300g chickenBreast", "5g oliveOil"],
                macros: { calories: 691.4, protein: 81.8, carbs: 51.0, fat: 16.6 }
            },
            sandwich3: {
                sunday: {
                    items: ["110g wholeWheatBread", "200g beefLiver", "100g apple", "5g oliveOil"],
                    macros: { calories: 653.4, protein: 55.1, carbs: 71.9, fat: 16.2 },
                    proteinType: "beefLiver"
                },
                monday: {
                    items: ["110g wholeWheatBread", "250g leanBeef", "100g apple", "5g oliveOil"],
                    macros: { calories: 725.9, protein: 67.8, carbs: 64.9, fat: 21.5 },
                    proteinType: "leanBeef"
                },
                tuesday: {
                    items: ["110g wholeWheatBread", "220g tuna", "100g apple", "5g oliveOil"],
                    macros: { calories: 621.0, protein: 72.1, carbs: 65.4, fat: 9.4 },
                    proteinType: "tuna"
                },
                wednesday: {
                    items: ["110g wholeWheatBread", "250g leanBeef", "100g apple", "5g oliveOil"],
                    macros: { calories: 725.9, protein: 67.8, carbs: 64.9, fat: 21.5 },
                    proteinType: "leanBeef"
                },
                thursday: {
                    items: ["110g wholeWheatBread", "180g sardines", "100g apple", "5g oliveOil"],
                    macros: { calories: 651.6, protein: 60.6, carbs: 65.5, fat: 17.9 },
                    proteinType: "sardines"
                },
                friday: {
                    items: ["110g wholeWheatBread", "220g tuna", "100g apple", "5g oliveOil"],
                    macros: { calories: 621.0, protein: 72.1, carbs: 65.4, fat: 9.4 },
                    proteinType: "tuna"
                },
                saturday: {
                    items: ["110g wholeWheatBread", "250g leanBeef", "100g apple", "5g oliveOil"],
                    macros: { calories: 725.9, protein: 67.8, carbs: 64.9, fat: 21.5 },
                    proteinType: "leanBeef"
                }
            }
        };

        // Calorie needs per day (Base TDEE: 2,383 + exercise)
        const calorieNeeds = {
            sunday: 2493,
            monday: 2883,
            tuesday: 3043,
            wednesday: 2883,
            thursday: 2943,
            friday: 3043,
            saturday: 2933
        };

        // Day titles
        const dayTitles = {
            sunday: "Sunday - Rest Day",
            monday: "Monday - Chest Day",
            tuesday: "Tuesday - Cycling",
            wednesday: "Wednesday - Back Day",
            thursday: "Thursday - Running",
            friday: "Friday - Cycling",
            saturday: "Saturday - Legs Day"
        };
        
        const daysArray = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
        let currentDayIndex = 0;
        
        // Function to change day with arrows
        function changeDay(direction) {
            currentDayIndex = (currentDayIndex + direction + 7) % 7;
            const currentDay = daysArray[currentDayIndex];
            showDay(currentDay);
            hideDayDropdown();
        }
        
        // Function to toggle day dropdown
        function toggleDayDropdown() {
            const dropdown = document.getElementById('dayDropdown');
            dropdown.classList.toggle('show');
        }
        
        // Function to hide day dropdown
        function hideDayDropdown() {
            const dropdown = document.getElementById('dayDropdown');
            dropdown.classList.remove('show');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dayTitle = document.getElementById('currentDayTitle');
            const dropdown = document.getElementById('dayDropdown');
            if (dropdown && !dayTitle.contains(event.target)) {
                hideDayDropdown();
            }
        });

        // Update calorie stats
        function updateCalorieStats(day) {
            const needed = calorieNeeds[day];
            const consumed = calculateDailyCalories(day);
            const deficit = needed - consumed;
            
            const statsDiv = document.getElementById('calorieStats');
            statsDiv.innerHTML = `
                <div class="stat-item">
                    <div class="stat-value needed">${needed}</div>
                    <div class="stat-label">Calories Needed</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value consumed">${consumed}</div>
                    <div class="stat-label">Calories Consumed</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value deficit">${deficit}</div>
                    <div class="stat-label">Deficit</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value water">+3L</div>
                    <div class="stat-label">Daily Water</div>
                </div>
            `;
        }

        // Calculate daily calories for a specific day
        function calculateDailyCalories(day) {
            const sandwich3 = mealData.sandwich3[day];
            const total = mealData.preMeal.macros.calories + 
                         mealData.sandwich1.macros.calories + 
                         mealData.sandwich2.macros.calories + 
                         sandwich3.macros.calories;
            return Math.round(total);
        }

        // Function to get exercise text
        function getExerciseText(exercise) {
            // Check if it's a translatable exercise
            if (exercise.includes('normalWalking')) {
                const minutes = exercise.split(' ')[0];
                return `${minutes} Minutes Normal Walking`;
            }
            if (exercise.includes('inclineWalking')) {
                const minutes = exercise.split(' ')[0];
                return `${minutes} Minutes Incline Walking`;
            }
            if (exercise === 'completeRestDay') return 'Complete Rest Day';
            if (exercise === 'focusRecovery') return 'Focus on Recovery';
            if (exercise === 'mealPrep') return 'Meal Prep for the Week';
            if (exercise.includes('cyclingSession')) {
                return `Cycling Session${exercise.includes('20km') ? ' - 20km' : ''}`;
            }
            if (exercise.includes('runningSession')) {
                return `Running${exercise.includes('5km') ? ' - 5km' : ''}`;
            }
            
            // Return as is for specific exercise names
            return exercise;
        }

        // Function to get food item text
        function getFoodItemText(item) {
            const foodMap = {
                'yogurt': 'Yogurt',
                'banana': 'Banana',
                'wholeWheatBread': 'Whole Wheat Bread',
                'boiledEggs': 'Boiled Eggs',
                'orange': 'Orange',
                'oliveOil': 'Olive Oil',
                'chickenBreast': 'Chicken Breast',
                'leanBeef': 'Lean Beef (95%)',
                'apple': 'Apple',
                'tuna': 'Tuna (in water)',
                'sardines': 'Sardines (in brine)',
                'beefLiver': 'Beef Liver'
            };
            
            for (const [key, value] of Object.entries(foodMap)) {
                if (item.toLowerCase().includes(key.toLowerCase())) {
                    const quantity = item.match(/\d+g?/);
                    return `‚Ä¢ ${quantity ? quantity[0] + ' ' : ''}${value}`;
                }
            }
            
            return `‚Ä¢ ${item}`;
        }

        // Function to show selected day
        function showDay(day) {
            const dayContent = document.getElementById('dayContent');
            const dayTitle = dayTitles[day];
            const workout = workoutData[day];
            const meals = getMealsForDay(day);
            const dailyTotals = calculateDailyTotals(meals);
            
            // Update the day title in navigator
            document.getElementById('currentDayTitle').childNodes[0].textContent = dayTitle + ' ';
            
            // Update current day index
            currentDayIndex = daysArray.indexOf(day);
            
            // Update dropdown active state
            updateDropdownActiveState();
            
            updateCalorieStats(day);
            
            dayContent.innerHTML = `
                <div class="day-content active">
                    <div class="content-grid">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon workout-icon">${getDayIcon(day)}</div>
                                <div class="card-title">${dayTitle}</div>
                            </div>
                            <ul class="workout-list">
                                ${workout.exercises.map((ex, index) => 
                                    `<li>
                                        <span class="exercise-text">${getExerciseText(ex)}</span>
                                        <input type="checkbox" class="exercise-checkbox" id="ex-${day}-${index}">
                                    </li>`
                                ).join('')}
                            </ul>
                            <div class="burn-badge">üî• ${workout.burnCalories} kcal burn</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon meal-icon">üçΩÔ∏è</div>
                                <div class="card-title">Daily Meals</div>
                            </div>
                            
                            ${generateMealDropdown('Pre-Training Meal', meals.preMeal, 'meal1')}
                            ${generateMealDropdown('Sandwich 1 (Post-Training)', meals.sandwich1, 'meal2')}
                            ${generateMealDropdown('Sandwich 2', meals.sandwich2, 'meal3')}
                            ${generateMealDropdown('Sandwich 3 ' + meals.sandwich3.proteinIcon, meals.sandwich3, 'meal4')}
                        </div>
                    </div>
                    
                    <div class="daily-summary">
                        <div class="summary-title">üìä Daily Totals</div>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-value">${dailyTotals.calories}</div>
                                <div class="summary-label">Total Calories</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value">${dailyTotals.protein}g</div>
                                <div class="summary-label">Total Protein</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value">${dailyTotals.carbs}g</div>
                                <div class="summary-label">Total Carbs</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-value">${dailyTotals.fat}g</div>
                                <div class="summary-label">Total Fat</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners for meal dropdowns
            document.querySelectorAll('.meal-header').forEach(header => {
                header.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                    const details = this.nextElementSibling;
                    details.classList.toggle('show');
                });
            });
        }

        // Function to get day title
        function getDayTitle(day) {
            return dayTitles[day];
        }

        // Function to get day icon
        function getDayIcon(day) {
            const icons = {
                sunday: 'üåü',
                monday: 'üí™',
                tuesday: 'üö¥',
                wednesday: 'üèãÔ∏è',
                thursday: 'üèÉ',
                friday: 'üö¥',
                saturday: 'ü¶µ'
            };
            return icons[day] || 'üí™';
        }

        // Function to get meals for day
        function getMealsForDay(day) {
            const sandwich3Data = mealData.sandwich3[day];
            const proteinIcons = {
                beefLiver: 'üçñ',
                leanBeef: 'ü•©',
                tuna: 'üêü',
                sardines: 'üêü'
            };
            
            return {
                preMeal: mealData.preMeal,
                sandwich1: mealData.sandwich1,
                sandwich2: mealData.sandwich2,
                sandwich3: {
                    ...sandwich3Data,
                    proteinIcon: proteinIcons[sandwich3Data.proteinType] || ''
                }
            };
        }

        // Function to generate meal dropdown
        function generateMealDropdown(title, meal, id) {
            const ingredientsHTML = meal.items.map(item => {
                return `<div class="ingredient-line">${getFoodItemText(item).replace('‚Ä¢ ', '')}</div>`;
            }).join('');
            
            return `
                <div class="meal-card">
                    <div class="meal-header" data-meal="${id}">
                        <span>${title}</span>
                        <span class="arrow">‚ñº</span>
                    </div>
                    <div class="meal-details" id="${id}">
                        <div class="ingredients-section">
                            ${ingredientsHTML}
                        </div>
                        <div class="nutrition-section">
                            <div class="nutrition-label">Nutrition Facts:</div>
                            <div class="nutrition-line">Calories: ${meal.macros.calories}</div>
                            <div class="nutrition-line">Protein: ${meal.macros.protein}g</div>
                            <div class="nutrition-line">Carbs: ${meal.macros.carbs}g</div>
                            <div class="nutrition-line">Fat: ${meal.macros.fat}g</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to calculate daily totals
        function calculateDailyTotals(meals) {
            const totals = {
                calories: 0,
                protein: 0,
                carbs: 0,
                fat: 0
            };
            
            Object.values(meals).forEach(meal => {
                if (meal.macros) {
                    totals.calories += meal.macros.calories;
                    totals.protein += meal.macros.protein;
                    totals.carbs += meal.macros.carbs;
                    totals.fat += meal.macros.fat;
                }
            });
            
            return {
                calories: Math.round(totals.calories),
                protein: totals.protein.toFixed(1),
                carbs: totals.carbs.toFixed(1),
                fat: totals.fat.toFixed(1)
            };
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Get current day and show it
            const today = new Date().getDay();
            currentDayIndex = today;
            const currentDay = daysArray[today];
            
            showDay(currentDay);
            
            // Add event listeners to dropdown items
            document.querySelectorAll('.day-dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const selectedDay = this.getAttribute('data-day');
                    currentDayIndex = daysArray.indexOf(selectedDay);
                    showDay(selectedDay);
                    hideDayDropdown();
                });
            });
            
            // Update dropdown active states
            updateDropdownActiveState();
        });
        
        // Function to update dropdown active state
        function updateDropdownActiveState() {
            document.querySelectorAll('.day-dropdown-item').forEach(item => {
                const itemDay = item.getAttribute('data-day');
                if (itemDay === daysArray[currentDayIndex]) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
    </script>
</body>
</html>
